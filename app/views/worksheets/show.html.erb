<header>
  <h1><%= @worksheet.name %></h1>
</header>

<section id="narrative" class="span-15 colborder">
  <h2>Narrative</h2>

  <%= markdown @worksheet.narrative %>
</section>

<nav id="worksheet-navigation" class="span-8 last">
  <ul>
    <li><%= link_to "Edit the worksheet details", [:edit, @worksheet] %></li>
    <li><%= link_to "Delete this worksheet", @worksheet, method: :delete, confirm: "Are you sure you want to delete the worksheet? You will lose all of the data associated with it." %></li>
    <li><%= link_to "Create a new account", new_worksheet_account_path(@worksheet) %></li>
    <li><%= link_to "Create a new transaction", new_worksheet_transaction_path(@worksheet) %></li>
  </ul>
</nav>

<section id="tables" class="span-24 last">
  <h2>T Accounts</h2>

  <% @worksheet.accounts.each do |account| %>
    <%= render account %>
  <% end %>
</section>

<section id="transactions" class="span-14 colborder">
  <h2>Transactions</h2>

  <table>
    <thead>
      <tr>
        <th>&nbsp;</th>
        <th>Date</th>
        <th>Description</th>
        <th class="currency">Amount</th>
        <th>&nbsp;</th>
      </tr>
    </thead>

    <tbody>
      <%= render :partial => @worksheet.transactions %>
    </tbody>
  </table>
</section>

<section id="trial-balance" class="span-9 last">
  <h2>Trial Balance</h2>

  <table>
    <thead>
      <tr>
        <th>&nbsp;</th>
        <th>Dr<br>&pound;</th>
        <th>Cr<br>&pound;</th>
      </tr>
    </thead>

    <tfoot>
      <tr>
        <td>Total</td>
        <td class="currency"><%= number_to_currency @worksheet.debits_total %></td>
        <td class="currency"><%= number_to_currency @worksheet.credits_total %></td>
      </tr>
    </tfoot>

    <tbody>
      <% @worksheet.accounts.each do |account| %>
        <tr>
          <td><%= account.name %></td>

          <% if account.debit_balance_brought_down? %>
            <td class="currency"><%= number_to_currency account.balance_brought_down %></td>
            <td>&nbsp;</td>
          <% else %>
            <td>&nbsp;</td>
            <td class="currency"><%= number_to_currency account.balance_brought_down %></td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
</section>
